<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NMPW2WL2');
    </script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is Your Building Quietly Bleeding Energy? - SentientZone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/global.css">
</head>
<body class="text-gray-800">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMPW2WL2"
              height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="bg-primary text-white py-20 px-4 text-center">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">
                Is Your Building Quietly Bleeding Energy?
            </h1>
            <p class="text-lg md:text-2xl text-blue-200 mb-8">
                Take the 60-second diagnostic to uncover hidden HVAC wasteâ€”no technical knowledge needed.
            </p>
        </div>
    </div>

    <div class="py-20 bg-white">
        <section class="max-w-3xl mx-auto px-4">
            <div class="card p-8">
                <form id="silentLossQuiz" class="text-left">
                    <div class="quiz-question">
                        <label class="block text-xl font-bold mb-3 text-primary">
                            1. What type of space best describes your building?
                        </label>
                        <select id="spaceType" name="spaceType" class="quiz-input text-lg rounded-md p-2 border border-gray-300 w-full focus:ring-2 focus:ring-accent focus:border-transparent" required>
                            <option value="">Select an option</option>
                            <option value="office">Office Building</option>
                            <option value="school">School/University</option>
                            <option value="gym">Gym/Fitness Center</option>
                            <option value="retail">Retail Store/Mall</option>
                            <option value="hospitality">Hotel/Hospitality</option>
                            <option value="other">Other Commercial</option>
                        </select>
                    </div>

                    <div class="quiz-question mt-8">
                        <label class="block text-xl font-bold mb-3 text-primary">
                            2. Do occupants regularly adjust thermostats or complain about comfort?
                        </label>
                        <div class="mt-2 space-y-2">
                            <label class="quiz-option block p-3 bg-gray-50 rounded-md cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                <input type="radio" name="thermostatAdjust" value="yes" class="mr-2" required> Yes, frequently
                            </label>
                            <label class="quiz-option block p-3 bg-gray-50 rounded-md cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                <input type="radio" name="thermostatAdjust" value="sometimes" class="mr-2"> Sometimes
                            </label>
                            <label class="quiz-option block p-3 bg-gray-50 rounded-md cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                <input type="radio" name="thermostatAdjust" value="no" class="mr-2"> No, rarely or never
                            </label>
                        </div>
                    </div>

                    <div class="quiz-question mt-8">
                        <label class="block text-xl font-bold mb-3 text-primary">
                            3. How often are rooms or zones in your building empty but still receiving heating or cooling?
                        </label>
                        <div class="mt-2 space-y-2">
                            <label class="quiz-option block p-3 bg-gray-50 rounded-md cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                <input type="radio" name="emptyRooms" value="frequently" class="mr-2" required> Frequently (multiple hours/day)
                            </label>
                            <label class="quiz-option block p-3 bg-gray-50 rounded-md cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                <input type="radio" name="emptyRooms" value="sometimes" class="mr-2"> Sometimes (a few hours/day)
                            </label>
                            <label class="quiz-option block p-3 bg-gray-50 rounded-md cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                <input type="radio" name="emptyRooms" value="rarely" class="mr-2"> Rarely or never
                            </label>
                        </div>
                    </div>

                    <div class="quiz-question mt-8">
                        <label class="block text-xl font-bold mb-3 text-primary">
                            4. Was your primary HVAC system installed or significantly overhauled in the last 7 years?
                        </label>
                        <div class="mt-2 space-y-2">
                            <label class="quiz-option block p-3 bg-gray-50 rounded-md cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                <input type="radio" name="hvacAge" value="yes" class="mr-2" required> Yes
                            </label>
                            <label class="quiz-option block p-3 bg-gray-50 rounded-md cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                <input type="radio" name="hvacAge" value="no" class="mr-2"> No, it's older
                            </label>
                            <label class="quiz-option block p-3 bg-gray-50 rounded-md cursor-pointer hover:bg-gray-100 transition-colors duration-200">
                                <input type="radio" name="hvacAge" value="unsure" class="mr-2"> Unsure
                            </label>
                        </div>
                    </div>

                    <div class="quiz-question mt-8">
                        <label class="block text-xl font-bold mb-3 text-primary">
                            5. What is your estimated average monthly energy bill for the entire building?
                        </label>
                        <input type="number" id="monthlyEnergyBill" name="monthlyEnergyBill"
                               class="quiz-input text-lg rounded-md p-2 border border-gray-300 w-full focus:ring-2 focus:ring-accent focus:border-transparent"
                               placeholder="$ Amount (e.g., 2500)" min="0" required>
                    </div>

                    <button type="submit"
                            class="w-full bg-accent text-primary font-bold py-4 px-8 rounded-full text-xl hover:bg-yellow-400 transition-colors duration-300 shadow-lg mt-10">
                        Reveal My Risk
                    </button>
                </form>

                <div id="quizResult" class="quiz-result-section mt-12 hidden">
                    <h3 class="text-3xl font-extrabold text-primary mb-4">
                        HVAC Energy Leak Risk: <span id="riskLevel"></span>
                    </h3>
                    <p class="text-xl text-gray-700 mb-6">
                        Projected Annual Waste: <span id="projectedWaste" class="font-bold text-red-600"></span>
                    </p>
                    
                    <!-- Email Gate -->
                    <form id="emailGateForm" action="https://getform.io/f/byvyddxa" method="POST"
                                 class="mt-8 text-center">
                        <p class="text-lg font-semibold mb-4">
                            Want your full savings report + install guide?
                        </p>
                        <input type="email" id="quizEmail" name="email"
                               class="quiz-input max-w-md mx-auto mb-4 block text-lg rounded-md p-2 border border-gray-300 focus:ring-2 focus:ring-accent focus:border-transparent"
                               placeholder="you@yourcompany.com" required />
                        <input type="hidden" name="_gotcha" style="display:none !important">
                        <button type="submit" id="unlockProofBtn"
                                 class="bg-accent text-primary font-bold py-3 px-8 rounded-full text-lg hover:bg-yellow-400 transition-colors duration-300 shadow-lg">
                            Send My ROI + Unlock Next Step
                        </button>
                        <div id="emailMessage" class="message-box hidden mt-4 text-red-600"></div>
                    </form>

                    <a id="quizCta" href="#" class="mt-6 inline-block bg-secondary text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-blue-600 transition-colors duration-300 shadow-lg">
                        See Proof + Calculate Your Payback
                    </a>
                </div>
            </div>
        </section>
    </div>

    <footer class="bg-white border-t border-gray-200 mt-16">
        <div class="container mx-auto px-6 py-8 text-center text-gray-500">
            <p>&copy; 2025 SentientZone. All rights reserved.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        console.log("DOMContentLoaded fired. Quiz script loaded."); // Diagnostic 1
        window.dataLayer = window.dataLayer || [];

        // Helper function to get radio button value
        function getRadioValue(name) {
            const radios = document.getElementsByName(name);
            for (let i = 0; i < radios.length; i++) {
                if (radios[i].checked) {
                    return radios[i].value;
                }
            }
            return null;
        }

        // Function to calculate risk level based on quiz answers
        function calculateRiskLevel() {
            let score = 0;
            const spaceType = document.getElementById('spaceType').value;
            const thermostatAdjust = getRadioValue('thermostatAdjust');
            const emptyRooms = getRadioValue('emptyRooms');
            const hvacAge = getRadioValue('hvacAge');
            const monthlyEnergyBill = parseFloat(document.getElementById('monthlyEnergyBill').value) || 0;

            // Assign points based on answers to determine risk
            if (thermostatAdjust === 'yes') {
                score += 3;
            } else if (thermostatAdjust === 'sometimes') {
                score += 1;
            }

            if (emptyRooms === 'frequently') {
                score += 3;
            } else if (emptyRooms === 'sometimes') {
                score += 1;
            }

            if (hvacAge === 'no') { // Older HVAC increases risk
                score += 2;
            } else if (hvacAge === 'unsure') {
                score += 1;
            }

            // Consider high energy bill as a factor for higher risk
            if (monthlyEnergyBill > 5000) { // Example threshold
                score += 2;
            } else if (monthlyEnergyBill > 1000) {
                score += 1;
            }

            // Adjust for space type if needed, e.g.,
            // if (spaceType === 'office' || spaceType === 'retail') score += 1;

            const risk = (score >= 6) ? 'HIGH' : (score >= 3) ? 'MEDIUM' : 'LOW';
            console.log("Calculated Risk Level:", risk, "Score:", score); // Diagnostic 2
            return risk;
        }

        // Function to calculate projected annual waste
        function calculateProjectedAnnualWaste() {
            const monthlyEnergyBill = parseFloat(document.getElementById('monthlyEnergyBill').value);
            if (isNaN(monthlyEnergyBill) || monthlyEnergyBill <= 0) {
                console.log("Monthly energy bill is invalid or zero."); // Diagnostic 3
                return 'N/A'; // Or a default message
            }

            // Assuming HVAC is 40% of the total energy bill and SentientZone saves 30% of HVAC costs
            const annualBill = monthlyEnergyBill * 12;
            const hvacPortion = annualBill * 0.40; // 40% of bill is HVAC
            const potentialSavings = hvacPortion * 0.30; // 30% savings on HVAC portion
            
            const waste = `$${potentialSavings.toFixed(2)}`;
            console.log("Calculated Projected Annual Waste:", waste); // Diagnostic 4
            return waste;
        }

        // Quiz submission
        const quizForm = document.getElementById('silentLossQuiz');
        if (quizForm) { // Ensure the form exists before adding listener
            quizForm.addEventListener('submit', function(e) {
                console.log("Quiz form submit event triggered."); // Diagnostic 5
                e.preventDefault(); // Crucial: Prevent default form submission

                // Calculate and display results
                const calculatedRisk = calculateRiskLevel();
                const calculatedWaste = calculateProjectedAnnualWaste();

                document.getElementById('riskLevel').textContent = calculatedRisk;
                document.getElementById('projectedWaste').textContent = calculatedWaste;

                // Store results in session storage for use on other pages (e.g., proof.html)
                sessionStorage.setItem('quiz_risk', calculatedRisk);
                sessionStorage.setItem('quiz_bill', document.getElementById('monthlyEnergyBill').value);
                sessionStorage.setItem('projected_annual_waste', calculatedWaste);

                // Hide the quiz form and show the result section
                this.classList.add('hidden'); // 'this' refers to the form
                document.getElementById('quizResult').classList.remove('hidden');
                console.log("Quiz results displayed. Form hidden."); // Diagnostic 6

                // Push GTM event for quiz submission
                dataLayer.push({
                    event: 'quiz_submit',
                    category: 'Quiz',
                    action: 'Reveal Risk',
                    label: document.getElementById('spaceType').value || 'unknown',
                    risk_level: calculatedRisk,
                    projected_waste: calculatedWaste
                });
                console.log("GTM quiz_submit event pushed."); // Diagnostic 7
            });
        } else {
            console.error("Error: Quiz form with ID 'silentLossQuiz' not found.");
        }


        // Email gate submission (TEMPORARILY COMMENTED OUT FOR DIAGNOSTICS)
        /*
        document.getElementById('emailGateForm').addEventListener('submit', function(e) {
            e.preventDefault();
            console.log("Email gate form submit event triggered."); // Diagnostic
            
            const email = document.getElementById('quizEmail').value;
            const formAction = this.action;
            const storedRisk = sessionStorage.getItem('quiz_risk');
            const storedWaste = sessionStorage.getItem('projected_annual_waste');

            dataLayer.push({
                event: 'email_submit',
                category: 'Quiz',
                action: 'Email Gate Submitted',
                label: email,
                risk_level: storedRisk,
                projected_waste: storedWaste
            });

            fetch(formAction, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(new FormData(this)).toString(),
            })
            .then(response => {
                if (response.ok) {
                    window.location.href = `/proof.html?risk=${storedRisk}&waste=${storedWaste}`;
                } else {
                    const messageBox = document.getElementById('emailMessage');
                    messageBox.textContent = 'There was an error submitting your email. Please try again.';
                    messageBox.classList.remove('hidden');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                const messageBox = document.getElementById('emailMessage');
                messageBox.textContent = 'Network error. Please try again.';
                messageBox.classList.remove('hidden');
            });
        });
        */

        // Proof CTA click (TEMPORARILY COMMENTED OUT FOR DIAGNOSTICS)
        /*
        document.getElementById('quizCta').addEventListener('click', function(e) {
            e.preventDefault();
            console.log("Proof CTA click event triggered."); // Diagnostic
            
            const storedRisk = sessionStorage.getItem('quiz_risk');
            const storedWaste = sessionStorage.getItem('projected_annual_waste');

            dataLayer.push({
                event: 'cta_click',
                category: 'Quiz',
                action: 'View Proof',
                label: 'See Proof + Calculate Your Payback',
                risk_level: storedRisk,
                projected_waste: storedWaste
            });
            
            window.location.href = `/proof.html?risk=${storedRisk}&waste=${storedWaste}`;
        });
        */
    });
    </script>
</body>
</html>
